package%20ui_dao_50%0A%0Aimport%20(%0A%09%22encoding%2Fbase64%22%0A%09%22std%22%0A%09%22strings%22%0A%09%22time%22%0A%0A%09dao_core%20%22gno.land%2Fp%2Fdemo%2Fdaodao%2Fcore%22%0A%09dao_interfaces%20%22gno.land%2Fp%2Fdemo%2Fdaodao%2Finterfaces%22%0A%09%22gno.land%2Fp%2Fdemo%2Fdaodao%2Fproposal_single%22%0A%09%22gno.land%2Fp%2Fdemo%2Fdaodao%2Fvoting_group%22%0A%09%22gno.land%2Fr%2Fdemo%2Fgroups%22%0A%09modboards%20%22gno.land%2Fr%2Fdemo%2Fmodboards%22%0A)%0A%0Avar%20(%0A%09daoCore%20%20%20%20%20%20%20dao_core.IDAOCore%0A%09registry%20%20%20%20%20%20%3D%20dao_interfaces.NewMessagesRegistry()%0A%09mainBoardName%20%3D%20%22ui_dao_50%22%0A%09groupID%20%20%20%20%20%20%20groups.GroupID%0A)%0A%0Afunc%20init()%20%7B%0A%09groupID%20%3D%20groups.CreateGroup(mainBoardName)%0A%09groups.AddMember(groupID%2C%20%22g108cszmcvs4r3k67k7h5zuhm4el3qhlrxzhshtv%22%2C%201%2C%20%22%22)%0A%09registry.Register(groups.NewAddMemberHandler())%0A%09registry.Register(groups.NewDeleteMemberHandler())%0A%0A%09daoCore%20%3D%20dao_core.NewDAOCore(dao_voting_group.NewGRC4Voting(groupID)%2C%20nil)%0A%0A%09tt%20%3A%3D%20dao_interfaces.Percent(1500)%20%2F%2F%2015%25%0A%09tq%20%3A%3D%20dao_interfaces.Percent(5000)%20%2F%2F%2050%25%0A%09proposalMod%20%3A%3D%20dao_proposal_single.NewDAOProposalSingle(daoCore%2C%20%26dao_proposal_single.DAOProposalSingleOpts%7B%0A%09%09MaxVotingPeriod%3A%20time.Second%20*%2086400%2C%0A%09%09Threshold%3A%20dao_interfaces.Threshold%7BThresholdQuorum%3A%20%26dao_interfaces.ThresholdQuorum%7B%0A%09%09%09Threshold%3A%20dao_interfaces.PercentageThreshold%7BPercent%3A%20%26tt%7D%2C%0A%09%09%09Quorum%3A%20%20%20%20dao_interfaces.PercentageThreshold%7BPercent%3A%20%26tq%7D%2C%0A%09%09%7D%7D%2C%0A%09%09Registry%3A%20registry%2C%0A%09%7D)%0A%09%2F%2F%20TODO%3A%20add%20a%20router%20to%20support%20multiple%20proposal%20modules%0A%09registry.Register(dao_proposal_single.NewUpdateSettingsHandler(proposalMod))%0A%09daoCore.AddProposalModule(proposalMod)%0A%0A%09registry.Register(modboards.NewCreateBoardHandler())%0A%09registry.Register(modboards.NewDeletePostHandler())%0A%09modboards.CreateBoard(mainBoardName)%0A%7D%0A%0Afunc%20Render(path%20string)%20string%20%7B%0A%09return%20%22%5B%5Bboard%5D(%2Fr%2Fdemo%2Fmodboards%3A%22%20%2B%20mainBoardName%20%2B%20%22)%5D%0A%0A%22%20%2B%20daoCore.Render(path)%0A%7D%0A%0Afunc%20GetCore()%20dao_core.IDAOCore%20%7B%0A%09return%20daoCore%0A%7D%0A%0Afunc%20Vote(moduleIndex%20int%2C%20proposalID%20int%2C%20vote%20dao_interfaces.Vote%2C%20rationale%20string)%20%7B%0A%09dao_core.GetProposalModule(daoCore%2C%20moduleIndex).Vote(proposalID%2C%20vote%2C%20rationale)%0A%7D%0A%0Afunc%20Execute(moduleIndex%20int%2C%20proposalID%20int)%20%7B%0A%09dao_core.GetProposalModule(daoCore%2C%20moduleIndex).Execute(proposalID)%0A%7D%0A%0Afunc%20Propose(moduleIndex%20int%2C%20title%20string%2C%20description%20string%2C%20b64Messages%20string)%20%7B%0A%09mod%20%3A%3D%20dao_core.GetProposalModule(daoCore%2C%20moduleIndex)%0A%09var%20messages%20%5B%5Ddao_interfaces.ExecutableMessage%0A%09if%20len(b64Messages)%20!%3D%200%20%7B%0A%09%09rawMessages%20%3A%3D%20strings.Split(b64Messages%2C%20%22%2C%22)%0A%09%09for%20_%2C%20rawMessage%20%3A%3D%20range%20rawMessages%20%7B%0A%09%09%09message%20%3A%3D%20registry.FromBase64String(rawMessage)%0A%09%09%09messages%20%3D%20append(messages%2C%20message)%0A%09%09%7D%0A%09%7D%0A%09mod.Propose(title%2C%20description%2C%20messages)%0A%7D%0A%0Afunc%20GetBinaryMembers()%20string%20%7B%0A%09members%20%3A%3D%20groups.GetMembers(groupID)%0A%09ss%20%3A%3D%20%5B%5Dstring%7B%7D%0A%09for%20_%2C%20member%20%3A%3D%20range%20members%20%7B%0A%09%09ss%20%3D%20append(ss%2C%20base64.RawURLEncoding.EncodeToString(member.Bytes()))%0A%09%7D%0A%09return%20strings.Join(ss%2C%20%22%2C%22)%0A%7D